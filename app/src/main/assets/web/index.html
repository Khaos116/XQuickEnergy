<!doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="./vant.css" />
    <link rel="stylesheet" href="./index.css" />
</head>

<body>
    <script src="./vue3.js"></script>
    <script src="./vant.js"></script>
    <script src="./default.js"></script>
    <div id="app">
        <div class="content">
            <van-collapse v-model="currentTab" accordion>
                <van-collapse-item :title="item.modelName" :name="index" :key='item.modelCode'
                    v-for="(item,index) in tabs">
                    <div class="content-box">
                        <div v-for="(item,index) in setData[currentTab]" :key="index">
                            <div class="flex-space-between mt15" v-if="item.type==='BOOLEAN'">
                                <div class="title">{{item.name}}</div>
                                <div class="flex-center"><van-switch v-model="item.configValue" size="1rem" /></div>
                            </div>
                            <div class="flex-space-between  mt15"
                                v-if="['MULTIPLY_INTEGER','LIST','MULTIPLY_INTEGER'].includes(item.type)">
                                <div class="mt5 title">{{item.name}}</div>
                                <div class="w160"><van-field v-model="item.configValue" placeholder="请输入..." />
                                </div>
                            </div>

                            <!-- <div class="mt15" v-if="item.type==='CHOICE'">
                                                    <div class="mt5 title">{{item.name}}</div>
                                                    <div class="flex-space-between">
                                                        <van-radio-group v-model="item.configValue" direction="horizontal">
                                                            <van-radio :name="Number(0)">系统计时</van-radio>
                                                            <van-radio :name="Number(1)">程序计时</van-radio>
                                                        </van-radio-group>
                                                    </div>
                                                </div> -->


                        </div>
                    </div>
                </van-collapse-item>
            </van-collapse>
            <!-- <van-sidebar v-model="currentTab" @change="(index)=>{currentTab=index}">
                <van-sidebar-item :title="item.modelName" v-for="(item,index) in tabs" />
            </van-sidebar> -->
        </div>

        <!-- 不收取能量列表弹窗 -->
        <van-dialog v-model:show="noCollectEnergyVisible" title="不收取能量列表" show-cancel-button>
            1111
        </van-dialog>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, onUnmounted } = Vue;
        const { Field, Button, showToast } = vant;
        const { default_BaseModel, default_AntForestV2 } = defaultJson;
        createApp({
            setup() {
                // 左侧导航菜单
                const tabs = ref(JSON.parse(window.HOOK.getTabs()));
                const currentTab = ref(0);
                //设置默认值
                const setData = ref(tabs.value.map(item => {
                    return JSON.parse(window.HOOK.getModel(item.modelCode))
                }))
                const BaseModel = ref(JSON.parse(window.HOOK.getModel('BaseModel')).fields);
                const AntForestV2 = ref(default_AntForestV2)

                // 不收取能量列表弹窗
                const noCollectEnergyVisible = ref(false)
                const noCollectEnergyVisibleList = ref([])

                onMounted(() => {
                    // document.getElementById("tabsBtn").onclick = async function () {
                    //     document.getElementById("tabsTextIpt").value = window.HOOK.getTabs();
                    // }

                    // /*document.getElementById("allConfigBtn").onclick = async function () {
                    //     document.getElementById("allConfigTextIpt").value = window.HOOK.getAllConfig();
                    // }*/

                    // document.getElementById("configBtn").onclick = async function () {
                    //     document.getElementById("configTextIpt").value = window.HOOK.getModel(document.getElementById("configSelectIpt").value);
                    // }

                    // document.getElementById("fieldBtn").onclick = async function () {
                    //     document.getElementById("fieldTextIpt").value = window.HOOK.getField(document.getElementById("modelCodeIpt").value, document.getElementById("fieldCodeIpt").value);
                    // }

                    // document.getElementById("updateBtn").onclick = async function () {
                    //     document.getElementById("updateTextIpt").value = window.HOOK.setField(document.getElementById("modelCodeIpt1").value, document.getElementById("updateCodeIpt").value);
                    // }
                    console.log('11111111', setData.value, JSON.parse(window.HOOK.getTabs()), JSON.parse(window.HOOK.getModel('AntForestV2')).fields, JSON.parse(window.HOOK.getField('AntForestV2', 'dontCollectList')));
                    tabs.value = JSON.parse(window.HOOK.getTabs());
                    BaseModel.value = JSON.parse(window.HOOK.getModel('BaseModel')).fields;
                    AntForestV2.value = JSON.parse(window.HOOK.getModel('AntForestV2')).fields;
                    noCollectEnergyVisibleList.value = JSON.parse(window.HOOK.getField('AntForestV2', 'dontCollectList'));
                });

                onUnmounted(() => {
                    console.log('unmounted');
                })

                return {
                    tabs,
                    currentTab,
                    BaseModel,
                    AntForestV2,
                    noCollectEnergyVisible,
                    setData
                };
            }
        }).use(vant).use(vant.Lazyload).mount('#app');
    </script>
</body>

</html>